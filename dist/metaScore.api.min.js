/*! metaScore - v0.0.2 - 2015-07-14 - Oussama Mubarak */
(function(){function t(t,e){"string"==typeof t&&(t=document.getElementById(t)),this.target=t,this.origin="*",this.ready=!1,this.callbacks={},this.target.addEventListener("load",this.onLoad.bind(this,e),!1),window.addEventListener("message",this.onMessage.bind(this),!1)}t.prototype.postMessage=function(t,e){var n;return this.target.contentWindow.postMessage?(n=JSON.stringify({method:t,params:e}),this.target.contentWindow.postMessage(n,this.origin),void 0):!1},t.prototype.onLoad=function(t){this.on("ready",function(){console.log("ready"),t.call(null,this)})},t.prototype.onMessage=function(t){var e,n,i;try{e=JSON.parse(t.data)}catch(o){return!1}return"callback"in e&&(n=this.callbacks[e.callback])?(i="params"in e?e.params:null,n.call(this,i),void 0):!1},t.prototype.on=function(t,e){var n=""+(new Date).valueOf()+Math.random();return this.callbacks[n]=e,this.postMessage("addEventListener",{type:t,callback:n}),this},t.prototype.play=function(){return this.postMessage("play"),this},t.prototype.pause=function(){return this.postMessage("pause"),this},t.prototype.paused=function(t){var e=""+(new Date).valueOf()+Math.random();return this.callbacks[e]=t,this.postMessage("paused",e),this},t.prototype.seek=function(t){return this.postMessage("seek",t),this},t.prototype.time=function(t){var e=""+(new Date).valueOf()+Math.random();return this.callbacks[e]=t,this.postMessage("time",e),this},window.metaScoreAPI=t})();