/*! metaScore - v0.0.2 - 2015-07-31 - Oussama Mubarak */
(function(){function t(t,e){"string"==typeof t&&(t=document.getElementById(t)),this.target=t,this.origin="*",this.ready=!1,this.callbacks={},this.target.addEventListener("load",this.onLoad.bind(this,e),!1),window.addEventListener("message",this.onMessage.bind(this),!1)}var e=/^http?:\/\/metascore.philharmoniedeparis.fr/;t.prototype.postMessage=function(t,e){var n;return this.target.contentWindow.postMessage?(n=JSON.stringify({method:t,params:e}),this.target.contentWindow.postMessage(n,this.origin),void 0):!1},t.prototype.onLoad=function(t){this.on("ready",function(){t.call(null,this)})},t.prototype.onMessage=function(t){var n,i,o;if(!e.test(t.origin))return!1;try{n=JSON.parse(t.data)}catch(s){return!1}return"callback"in n&&(i=this.callbacks[n.callback])?(o="params"in n?n.params:null,i.call(this,o),void 0):!1},t.prototype.on=function(t,e){var n=""+(new Date).valueOf()+Math.random();return this.callbacks[n]=e,this.postMessage("addEventListener",{type:t,callback:n}),this},t.prototype.play=function(){return this.postMessage("play"),this},t.prototype.pause=function(){return this.postMessage("pause"),this},t.prototype.paused=function(t){var e=""+(new Date).valueOf()+Math.random();return this.callbacks[e]=t,this.postMessage("paused",e),this},t.prototype.seek=function(t){return this.postMessage("seek",t),this},t.prototype.time=function(t){var e=""+(new Date).valueOf()+Math.random();return this.callbacks[e]=t,this.postMessage("time",e),this},window.metaScoreAPI=t})();