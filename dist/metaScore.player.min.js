/*! metaScore - v0.0.1 - 2014-06-27 - Oussama Mubarak */
(function(t){"use strict";var e={version:"0.0.1"};(function(t){function e(t){t.parent instanceof Function&&(e.apply(this,[t.parent]),this.super=n(this,s(this,this.constructor))),t.apply(this,arguments)}function n(t,e){for(var n in t)"super"!==n&&t[n]instanceof Function&&(e[n]=t[n].super||s(t,t[n]));return e}function s(t,e){var n=t.super;return e.super=function(){return t.super=n,e.apply(t,arguments)}}t.Base=function(){},t.Base.extend=function r(t){function s(){e!==arguments[0]&&(e.apply(this,[t]),n(this,this),this.initializer instanceof Function&&this.initializer.apply(this),this.constructor.apply(this,arguments))}return s.prototype=new this(e),s.prototype.constructor=s,s.toString=function(){return""+t},s.extend=function(e){return e.parent=t,r.apply(s,arguments)},s},t.Base=t.Base.extend(function(){this.constructor=function(){},this.initConfig=function(e){e=e||{},this.configs=this.defaults?t.Object.extend({},this.defaults,e):e}})})(e),e.Array=e.Base.extend(function(){}),e.Array.inArray=function(t,e){var n,s=0;if(e){if(e.indexOf)return e.indexOf(t);for(n=e.length;n>s;s++)if(s in e&&e[s]===t)return s}return-1},e.Array.copy=function(t){return[].concat(t)},e.Array.shuffle=function(t){var n=e.Array.copy(t);return n.sort(function(){return(0|3*Math.random())-1}),n},e.Array.unique=function(t){for(var e=[],n=t.length,s=0;n>s;s++){for(var r=s+1;n>r;r++)t[s]===t[r]&&(r=++s);e.push(t[s])}return e},e.Array.each=function(t,e,n){for(var s,r=0,i=t.length,a=void 0!==n;i>r&&(s=e.call(a?n:t[r],r,t[r]),s!==!1);r++);return t},e.Object=e.Base.extend(function(){}),e.Object.extend=function(){for(var t,e,n,s,r=arguments[0]||{},i=1,a=arguments.length;a>i;i++)if(null!=(t=arguments[i]))for(e in t)n=r[e],s=t[e],n!==s&&void 0!==s&&(r[e]=s);return r},e.Object.copy=function(t){return e.Object.extend({},t)},e.Object.each=function(t,e,n){var s,r,i=void 0!==n;for(s in t)if(t.hasOwnProperty(s)&&(r=e.call(i?n:t[s],s,t[s]),r===!1))break;return t},e.Var=e.Base.extend(function(){}),e.Var.classes2types={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},e.Var.type=function(t){return null==t?t+"":e.Var.classes2types[Object.prototype.toString.call(t)]||"object"},e.Var.is=function(t,n){return e.Var.type(t)===n.toLowerCase()},e.Dom=e.Base.extend(function(){this.constructor=function(){var t;if(this.elements=[],arguments.length>0&&(t=e.Dom.elementsFromString.apply(this,arguments)||e.Dom.selectElements.apply(this,arguments))){for(var n=0;t.length>n;n++)this.elements[n]=t[n];arguments.length>1&&this.attr(arguments[1])}},this.get=function(t){return this.elements[t]},this.addClass=function(t){return e.Array.each(this.elements,function(n,s){e.Dom.addClass(s,t)},this),this},this.removeClass=function(t){return e.Array.each(this.elements,function(n,s){e.Dom.removeClass(s,t)},this),this},this.toggleClass=function(t){return e.Array.each(this.elements,function(n,s){e.Dom.toggleClass(s,t)},this),this},this.addListener=function(t,n,s){return e.Array.each(this.elements,function(r,i){e.Dom.addListener(i,t,n,s)},this),this},this.removeListener=function(t,n,s){return e.Array.each(this.elements,function(r,i){e.Dom.removeListener(i,t,n,s)},this),this},this.triggerEvent=function(t,n,s){e.Array.each(this.elements,function(r,i){e.Dom.triggerEvent(i,t,n,s)},this)},this.text=function(t){return void 0===t?e.Dom.text(this.get(0)):(e.Array.each(this.elements,function(n,s){e.Dom.text(s,t)},this),void 0)},this.val=function(t){return void 0===t?e.Dom.val(this.get(0)):(e.Array.each(this.elements,function(n,s){e.Dom.val(s,t)},this),void 0)},this.attr=function(t,n){return e.Array.each(this.elements,function(s,r){e.Dom.attr(r,t,n)},this),this},this.css=function(t,n){return e.Array.each(this.elements,function(s,r){e.Dom.css(r,t,n)},this),this},this.append=function(t){return t instanceof e.Dom&&(t=t.elements),e.Dom.append(this.get(0),t),this},this.appendTo=function(t){return t instanceof e.Dom||(t=new e.Dom(t)),t=t.get(0),e.Array.each(this.elements,function(n,s){e.Dom.append(t,s)},this),this},this.remove=function(){return e.Array.each(this.elements,function(t,n){e.Dom.remove(n)},this),this},this.setDraggable=function(t){t?this.addListener("mousedown",this.startDrag):this.removeListener("mousedown",this.startDrag)},this.startDrag=function(t){var n=window.getComputedStyle(t.target,null);this.dragOffset={left:parseInt(n.getPropertyValue("left"),10)-t.clientX,top:parseInt(n.getPropertyValue("top"),10)-t.clientY},this.dragParent=new e.Dom("body").addListener("mouseup",this.stopDrag).addListener("mousemove",this.drag),this.addClass("dragging")},this.drag=function(t){var e=t.clientX+parseInt(this.dragOffset.left,10),n=t.clientY+parseInt(this.dragOffset.top,10);this.css("left",e+"px"),this.css("top",n+"px")},this.stopDrag=function(){this.dragParent.removeListener("mousemove",this.drag).removeListener("mouseup",this.stopDrag),delete this.dragOffset,delete this.dragParent,this.removeClass("dragging")}}),e.Dom.stringRe=/^<(.)+>$/,e.Dom.camelRe=/-([\da-z])/gi,e.Dom.camelReplaceFn=function(t,e){return e.toUpperCase()},e.Dom.camel=function(t){return t.replace(this.camelRe,this.camelReplaceFn)},e.Dom.bubbleEvents={click:!0,submit:!0,mousedown:!0,mousemove:!0,mouseup:!0,mouseover:!0,mouseout:!0,transitionend:!0},e.Dom.selectElements=function(t,n){var s;return n||(n=document),s=e.Var.is(t,"string")?n.querySelectorAll(t):t.length?t:[t]},e.Dom.elementsFromString=function(t){var e,n,s,r={option:[1,"<select multiple='multiple'>","</select>"],optgroup:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tbody:[1,"<table>","</table>"],tfoot:[1,"<table>","</table>"],colgroup:[1,"<table>","</table>"],caption:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],th:[3,"<table><tbody><tr>","</tr></tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[1,"<div>","</div>"]},i=document.createElement("div"),a=/<\s*\w.*?>/g.exec(t);if(null!=a){for(e=a[0].replace(/</g,"").replace(/\/?>/g,""),n=r[e]||r._default,t=n[1]+t+n[2],i.innerHTML=t,s=n[0];s--;)i=i.lastChild;return i.childNodes}return null},e.Dom.hasClass=function(t,e){return t.classList.contains(e)},e.Dom.addClass=function(t,e){for(var n=e.split(" "),s=0,r=n.length;r>s;s++)t.classList.add(n[s])},e.Dom.removeClass=function(t,e){for(var n=e.split(" "),s=0,r=n.length;r>s;s++)t.classList.remove(n[s])},e.Dom.toggleClass=function(t,e){for(var n=e.split(" "),s=0,r=n.length;r>s;s++)t.classList.toggle(n[s])},e.Dom.addListener=function(t,n,s,r){return void 0===r&&(r=e.Dom.bubbleEvents.hasOwnProperty("type")?e.Dom.bubbleEvents[n]:!1),t.addEventListener(n,s,r)},e.Dom.removeListener=function(t,n,s,r){return void 0===r&&(r=e.Dom.bubbleEvents.hasOwnProperty("type")?e.Dom.bubbleEvents[n]:!1),t.removeEventListener(n,s,r)},e.Dom.triggerEvent=function(t,e,n,s){var r=document.createEvent("HTMLEvents");return r.initEvent(e,n,s),t.dispatchEvent(r)},e.Dom.text=function(t,e){return void 0!==e&&(t.innerHTML=e),t.innerHTML},e.Dom.val=function(t,e){return void 0!==e&&(t.value=e),t.value},e.Dom.attr=function(t,n,s){if(e.Var.is(n,"object"))e.Object.each(n,function(n,s){e.Dom.attr(t,n,s)},this);else switch(n){case"class":this.addClass(t,s);break;case"text":this.text(t,s);break;default:if(null!==s)return void 0!==s&&t.setAttribute(n,s),t.getAttribute(n);t.removeAttribute(n)}},e.Dom.css=function(t,e,n){return e=this.camel(e),void 0!==n&&(t.style[e]=n),t.style.hasOwnProperty(e)?t.style[e]:null},e.Dom.append=function(t,n){e.Var.is(n,"array")||(n=[n]),e.Array.each(n,function(e,n){t.appendChild(n)},this)},e.Dom.remove=function(t){t.parentElement.removeChild(t)},e.Player=e.Dom.extend(function(){this.constructor=function(t){this.super("<div/>",{"class":"metaScore-player"}),void 0!==t&&this.appendTo(t)}}),e.Player.Pager=e.Dom.extend(function(){var t,n;this.constructor=function(){this.super("<div/>",{"class":"pager"}),t=new e.Dom("<div/>",{"class":"count"}).appendTo(this),n=new e.Dom("<div/>",{"class":"buttons"}).appendTo(this),n.first=new e.Dom("<div/>",{"class":"first"}).appendTo(n),n.previous=new e.Dom("<div/>",{"class":"previous"}).appendTo(n),n.next=new e.Dom("<div/>",{"class":"next"}).appendTo(n)}}),e.Player.Element=e.Dom.extend(function(){this.constructor=function(){this.super("<div/>",{"class":"element"})},this.setProperty=function(t,e){switch(t){case"x":this.css("left",e+"px");break;case"y":this.css("top",e+"px");break;case"width":this.css("width",e+"px");break;case"height":this.css("height",e+"px");break;case"reading-index":this.attr("data-r-index",e);break;case"z-index":this.css("z-index",e);break;case"bg-color":this.css("background-color",e);break;case"bg-image":this.css("background-image","url("+e+")");break;case"border-width":this.css("border-width",e+"px");break;case"border-color":this.css("border-color",e);break;case"start":this.attr("data-start",e);break;case"end":this.attr("data-end",e)}}}),e.Player.Page=e.Dom.extend(function(){var t=[];this.constructor=function(){this.super("<div/>",{"class":"page"})},this.addElement=function(n){var s=new e.Player.Element(n).appendTo(this);return t.push(s),s},this.setProperty=function(t,e){switch(t){case"bg-color":this.css("background-color",e);break;case"bg-image":this.css("background-image","url("+e+")");break;case"start":this.attr("data-start",e);break;case"end":this.attr("data-end",e)}}}),e.Player.Block=e.Dom.extend(function(){var t,n=[];this.constructor=function(){this.super("<div/>",{"class":"block"}),t=(new e.Player.Pager).appendTo(this)},this.addPage=function(t){var s=new e.Player.Page(t).appendTo(this);return n.push(s),s},this.setProperty=function(t,e){switch(t){case"x":this.css("left",e+"px");break;case"y":this.css("top",e+"px");break;case"width":this.css("width",e+"px");break;case"height":this.css("height",e+"px");break;case"bg-color":this.css("background-color",e);break;case"bg-image":this.css("background-image","url("+e+")");break;case"synched":this.attr("data-synched",e)}}}),t.metaScore=e})(this);