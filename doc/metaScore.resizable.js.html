<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: helpers/metaScore.resizable.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: helpers/metaScore.resizable.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * Dom
 *
 * @requires ../metaScore.base.js
 * @requires metaScore.dom.js
 */
metaScore.Resizable = metaScore.Base.extend(function(){

  var _target, _container, _handles,
    _startState;

  this.constructor = function(target, container) {
  
    _target = target;
    
    _container = container || new metaScore.Dom('body');
    
    _handles = {};
    
    _handles.top = new metaScore.Dom('&lt;div/>', {'class': 'resize-handle'})
      .data('direction', 'top')
      .appendTo(_target);
    
    _handles.right = new metaScore.Dom('&lt;div/>', {'class': 'resize-handle'})
      .data('direction', 'right')
      .appendTo(_target);
    
    _handles.bottom = new metaScore.Dom('&lt;div/>', {'class': 'resize-handle'})
      .data('direction', 'bottom')
      .appendTo(_target);
    
    _handles.left = new metaScore.Dom('&lt;div/>', {'class': 'resize-handle'})
      .data('direction', 'left')
      .appendTo(_target);
    
    _handles.top_left = new metaScore.Dom('&lt;div/>', {'class': 'resize-handle'})
      .data('direction', 'top-left')
      .appendTo(_target);
      
    _handles.top_right = new metaScore.Dom('&lt;div/>', {'class': 'resize-handle'})
      .data('direction', 'top-right')
      .appendTo(_target);
      
    _handles.bottom_left = new metaScore.Dom('&lt;div/>', {'class': 'resize-handle'})
      .data('direction', 'bottom-left')
      .appendTo(_target);
      
    _handles.bottom_right = new metaScore.Dom('&lt;div/>', {'class': 'resize-handle'})
      .data('direction', 'bottom-right')
      .appendTo(_target);
      
    this.enable();
  
  };
  
  this.onMouseDown = function(evt){
  
    _startState = {
      'handle': evt.target,
      'x': evt.clientX,
      'y': evt.clientY,
      'left': parseInt(_target.css('left'), 10),
      'top': parseInt(_target.css('top'), 10),
      'w': parseInt(_target.css('width'), 10),
      'h': parseInt(_target.css('height'), 10)
    };
    
    _container
      .addListener('mousemove', this.onMouseMove)
      .addListener('mouseup', this.onMouseUp);
    
    _target
      .addClass('resizing')
      .triggerEvent('resizestart', null, false, true);
    
    evt.stopPropagation();
      
  };

  this.onMouseMove = function(evt){
  
    var handle = new metaScore.Dom(_startState.handle),
      w, h, top, left;
    
    switch(handle.data('direction')){
      case 'top':
        h = _startState.h - evt.clientY + _startState.y;
        top = _startState.top + evt.clientY  - _startState.y;
        break;
      case 'right':
        w = _startState.w + evt.clientX - _startState.x;
        break;
      case 'bottom':
        h = _startState.h + evt.clientY - _startState.y;
        break;
      case 'left':
        w = _startState.w - evt.clientX + _startState.x;
        left = _startState.left + evt.clientX - _startState.x;
        break;
      case 'top-left':
        w = _startState.w - evt.clientX + _startState.x;
        h = _startState.h - evt.clientY + _startState.y;
        top = _startState.top + evt.clientY  - _startState.y;
        left = _startState.left + evt.clientX - _startState.x;
        break;
      case 'top-right':
        w = _startState.w + evt.clientX - _startState.x;
        h = _startState.h - evt.clientY + _startState.y;
        top = _startState.top + evt.clientY - _startState.y;
        break;
      case 'bottom-left':
        w = _startState.w - evt.clientX + _startState.x;
        h = _startState.h + evt.clientY - _startState.y;
        left = _startState.left + evt.clientX - _startState.x;
        break;
      case 'bottom-right':
        w = _startState.w + evt.clientX - _startState.x;
        h = _startState.h + evt.clientY - _startState.y;
        break;
    }
      
    if(top !== undefined){
      _target.css('top', top +'px');
    }
    if(left !== undefined){
      _target.css('left', left +'px');
    }
    
    _target
      .css('width', w +'px')
      .css('height', h +'px')
      .triggerEvent('resize', null, false, true);
    
    evt.stopPropagation();
    
  };

  this.onMouseUp = function(evt){
  
    _container
      .removeListener('mousemove', this.onMouseMove)
      .removeListener('mouseup', this.onMouseUp);
    
    _target
      .removeClass('resizing')
      .triggerEvent('resizeend', null, false, true);
    
    evt.stopPropagation();
  };
  
  this.enable = function(){
  
    metaScore.Object.each(_handles, function(index, handle){
      handle.addListener('mousedown', this.onMouseDown);
    }, this);
  
    _target.addClass('resizable');
    
    return this;
  
  };
  
  this.disable = function(){
  
    metaScore.Object.each(_handles, function(index, handle){
      handle.removeListener('mousedown', this.onMouseDown);
    }, this);
  
    _target.removeClass('resizable');
    
    return this;
  
  };
  
  this.destroy = function(){
  
    this.disable();
  
    metaScore.Object.each(_handles, function(index, handle){
      handle.remove();
    }, this);
    
    return this;
  
  };
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Global</h3><ul><li><a href="global.html#metaScore">metaScore</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Wed Aug 06 2014 20:05:16 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
