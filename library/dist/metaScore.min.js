/*! metaScore - v0.0.1 - 2014-04-07 - Oussama Mubarak */
(function(t){"function"!=typeof Object.create&&function(){var t=function(){};Object.create=function(e){if(arguments.length>1)throw Error("Second argument not supported");if(null===e)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof e)throw TypeError("Argument must be an object");return t.prototype=e,new t}}();(function(t){t.metaScore={version:"0.0.1"}})(t),function(t){var e=t.metaScore;e.Base={inheritableStatics:["inheritableStatics","extend","create"],extend:function(t){var n,r,i,a;if(n=function(){},n.prototype=Object.create(this.prototype),n.prototype.$super=this,this.hasOwnProperty("inheritableStatics"))for(r=0,i=this.inheritableStatics.length;i>r;r++)a=this.inheritableStatics[r],this.hasOwnProperty(a)&&e.Base.addStatic.call(n,a,this[a]);for(a in t)t.hasOwnProperty(a)&&("statics"===a?e.Base.addStatics.call(n,t.statics):e.Base.addPrototype.call(n,a,t[a]));return n},create:function(){var t=Object.create(this.prototype);return"function"==typeof t.init&&t.init.apply(t,arguments),t},addStatics:function(t){var n;for(n in t)t.hasOwnProperty(n)&&e.Base.addStatic.call(this,n,t[n])},addStatic:function(t,e){this[t]=e,"function"==typeof e&&(this[t].$name=t)},addPrototypes:function(t){var n;for(n in t)t.hasOwnProperty(n)&&e.Base.addPrototype.call(this,n,t[n])},addPrototype:function(t,e){this.prototype[t]=e,"function"==typeof e&&(this.prototype[t].$name=t)}},e.Base.prototype={callSuper:function(){var t,e,n;this.$super&&(t=this.callSuper.caller,e=t.$name,e&&this.$super.hasOwnProperty(e)?n=this.$super[e]:e||t!==this.constructor||(n=this.$super.constructor),n&&n.apply(this,arguments))}}}(t),function(t){var e=t.metaScore;e.Ajax=e.Base.extend({statics:{defaults:{method:"GET",headers:[],async:!0,data:{},complete:null,success:null,error:null},activeX:["MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp","Microsoft.XMLHttp"],createXHR:function(){var t,n,r;if("undefined"!=typeof XMLHttpRequest)return t=new XMLHttpRequest;if(window.ActiveXObject)for(n=0,r=e.Ajax.activeX.length;r>n;n++)try{return t=new ActiveXObject(e.Ajax.activeX[n])}catch(i){}throw Error("XMLHttp object could be created.")},send:function(t,n){var r,i=e.Ajax.createXHR(),a=[];return n=e.Object.extend({},e.Ajax.defaults,n),e.Object.each(n.data,function(t,e){a.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),"POST"===n.method?(r=a.join("&"),n.headers["Content-type"]="application/x-www-form-urlencoded"):t+="?"+a.join("&"),i.open(n.method,t,n.async),e.Object.each(n.headers,function(t,e){i.setRequestHeader(t,e)}),i.onreadystatechange=function(){4===i.readyState&&(e.Var.is(n.complete,"function")&&n.complete(i),i.status>=200&&300>status||304===status?e.Var.is(n.success,"function")&&n.success(i):e.Var.is(n.error,"function")&&n.error(i))},i.send(r),i},get:function(t,n){return e.Object.extend(n,{method:"GET"}),e.Ajax.send(t,n)},post:function(t,n){return e.Object.extend(n,{method:"POST"}),e.Ajax.send(t,n)}}})}(t),function(t){var e=t.metaScore;e.Array=e.Base.extend({statics:{inArray:function(t,e){var n,r=0;if(e){if(e.indexOf)return e.indexOf(t);for(n=e.length;n>r;r++)if(r in e&&e[r]===t)return r}return-1},copy:function(t){return[].concat(t)},shuffle:function(t){var n=e.Array.copy(t);return n.sort(function(){return(0|3*Math.random())-1}),n},unique:function(t){for(var e=[],n=t.length,r=0;n>r;r++){for(var i=r+1;n>i;i++)t[r]===t[i]&&(i=++r);e.push(t[r])}return e},each:function(t,e,n){for(var r,i=0,a=t.length,o=void 0!==n;a>i&&(r=e.call(o?n:t[i],i,t[i]),r!==!1);i++);return t}}})}(t),function(t){var e=t.metaScore;e.Dom=e.Base.extend({statics:{stringRe:/^<(.)+>$/,camelRe:/-([\da-z])/gi,camelReplaceFn:function(t,e){return e.toUpperCase()},camel:function(t){return t.replace(this.camelRe,this.camelReplaceFn)},selectElements:function(t,n){var r;return n||(n=document),r=e.Var.is(t,"string")?n.querySelectorAll(t):t.length?t:[t]},elementFromString:function(t){var e,n,r;if(!t.match(/^<(.)+>$/))return null;if(e=new DOMParser,n=e.parseFromString(t,"text/xml"),r=n.getElementsByTagName("parsererror"),r.length>0)throw Error("A parsing error has occured.");return n.firstChild},hasClass:function(t,e){return t.classList.contains(e)},addClass:function(t,e){for(var n=e.split(" "),r=0,i=n.length;i>r;r++)t.classList.add(n[r])},removeClass:function(t,e){for(var n=e.split(" "),r=0,i=n.length;i>r;r++)t.classList.remove(n[r])},toggleClass:function(t,e){for(var n=e.split(" "),r=0,i=n.length;i>r;r++)t.classList.toggle(n[r])},text:function(t,e){return void 0!==e&&(t.innerHTML=e),t.innerHTML},attr:function(t,n,r){if(e.Var.is(n,"object"))e.Object.each(n,function(n,r){e.Dom.attr(t,n,r)},this);else switch(n){case"class":this.addClass(t,r);break;case"text":this.text(t,r);break;default:void 0!==r?t.setAttribute(n,r):t.removeAttribute(n)}return this},css:function(t,e,n){return e=this.camel(e),void 0!==n&&(t.style[e]=n),t.style[e]},append:function(t,n){e.Var.is(n,"array")||(n=[n]),e.Array.each(n,function(e,n){t.appendChild(n)},this)},remove:function(t){t.parentElement.removeChild(t)}},init:function(){var t,n;if(this.elements=[],arguments.length>0){try{t=e.Dom.elementFromString(arguments[0])}catch(r){}t?(arguments.length>1&&e.Dom.attr(t,arguments[1]),n=[t]):n=e.Dom.selectElements.apply(this,arguments)}if(n)for(var i=0;n.length>i;i++)this.elements[i]=n[i]},get:function(t){return this.elements[t]},addClass:function(t){return e.Array.each(this.elements,function(n,r){e.Dom.addClass(r,t)},this),this},removeClass:function(t){return e.Array.each(this.elements,function(n,r){e.Dom.removeClass(r,t)},this),this},toggleClass:function(t){return e.Array.each(this.elements,function(n,r){e.Dom.toggleClass(r,t)},this),this},text:function(t){return e.Array.each(this.elements,function(n,r){e.Dom.text(r,t)},this),this},attr:function(t,n){e.Array.each(this.elements,function(r,i){e.Dom.attr(i,t,n)},this)},css:function(t,n){return e.Array.each(this.elements,function(r,i){e.Dom.css(i,t,n)},this),this},append:function(t){return t instanceof e.Dom&&(t=t.elements),e.Dom.append(this.get(0),t),this},appendTo:function(t){return t instanceof e.Dom&&(t=t.get(0)),e.Array.each(this.elements,function(n,r){e.Dom.append(t,r)},this),this},remove:function(){return e.Array.each(this.elements,function(t,n){e.Dom.remove(n)},this),this}})}(t),function(t){var e=t.metaScore;e.Function=e.Base.extend({statics:{proxy:function(t,n){var r;return e.Var.type(t,"function")?(r=Array.prototype.slice.call(arguments,2),function(){return t.apply(n||this,r)}):void 0}}})}(t),function(t){var e=t.metaScore;e.Object=e.Base.extend({statics:{extend:function(){for(var t,e,n,r,i=arguments[0]||{},a=1,o=arguments.length;o>a;a++)if(null!=(t=arguments[a]))for(e in t)n=i[e],r=t[e],n!==r&&void 0!==r&&(i[e]=r);return i},each:function(t,e,n){var r,i,a=void 0!==n;for(r in t)if(t.hasOwnProperty(r)&&(i=e.call(a?n:t[r],r,t[r]),i===!1))break;return t}}})}(t),function(t){var e=t.metaScore;e.String=e.Base.extend({statics:{capitalize:function(t){return t.replace(/(?:^|\s)\S/g,function(t){return t.toUpperCase()})}}})}(t),function(t){var e=t.metaScore;e.Var=e.Base.extend({statics:{classes2types:{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},type:function(t){return null==t?t+"":e.Var.classes2types[Object.prototype.toString.call(t)]||"object"},is:function(t,n){return e.Var.type(t)===n.toLowerCase()}}})}(t),function(t){var e=t.metaScore;e.Media=e.Media||{},e.Media.CuePoint=e.Base.extend({triggers:[],init:function(t){this.media=t,this.media.addEventListener("timeupdate",this.onMediaTimeUpdate)},onMediaTimeUpdate:function(t){var n,r;n=t.target,r=parseFloat(n.currentTime),e.Object.each(this.triggers,function(t,e){!e.timer&&r>=e.inTime-.5&&e.inTime>r&&this.setupTriggerTimer(e,1e3*(e.inTime-r))})},addTrigger:function(t){return this.triggers.push(t)-1},removeTrigger:function(t){var e=this.triggers[t];this.stopTrigger(e,!1),this.triggers.splice(t,1)},setupTriggerTimer:function(t,n){t.timer=setTimeout(e.Function.proxy(this.launchTrigger,this,t),n)},launchTrigger:function(t){t.hasOwnProperty("onStart")&&e.Var.is(t.onStart,"function")&&t.onStart(this.media)},stopTrigger:function(t,n){t.hasOwnProperty("timer")&&(clearTimeout(t.timer),delete t.timer),t.hasOwnProperty("interval")&&(clearInterval(t.interval),delete t.interval),n!==!1&&t.hasOwnProperty("onEnd")&&e.Var.is(t.onEnd,"function")&&t.onEnd(this.media)}})}(t),function(t){var e=t.metaScore;e.Media=e.Media||{},e.Media.Element=e.Base.extend({})}(t),function(t){var e=t.metaScore;e.Editor=e.Base.extend({statics:{},init:function(t){this.element=e.Dom.create(t),this.element.addClass("metaScore-editor"),this.setupUI()},setupUI:function(){this.mainmenu=e.Editor.MainMenu.create(),this.mainmenu.getElement().appendTo(this.element)}})}(t),function(t){var e=t.metaScore;e.Editor=e.Editor||{},e.Editor.MainMenu=e.Base.extend({statics:{},init:function(){this.element=e.Dom.create("<div/>",{"class":"main-menu"})},getElement:function(){return this.element}})}(t)})(this);